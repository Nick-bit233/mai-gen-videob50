# 导入国际服B50 For DX.NET Extension

> 注意：本方法理论上也适用于日服，但未经过测试，可自行尝试，并反馈给开发者。

## 快速使用说明

- 进入DX NET的Rating对象乐曲页面，保存HTML源代码于软件根目录；
- 按照应用页面引导继续操作，注意在第1步导入B50时选择`从本地HTML读取B50`。

## 如何获取HTML源代码

1. 打开maimai DX NET并进入B50查看页面（[国际服链接](https://maimaidx-eng.com/maimai-mobile/home/ratingTargetMusic/)）。
   
2. 等待歌曲信息加载完毕后，按`Ctrl + U` 或 右键>>点击`查看网页源代码`。浏览器会跳转或打开一个新的页面。

3. 在新的页面中，按`Ctrl + S` 或 右键>>点击`另存为`。根据弹窗指引保存一个`.html`文件。建议您将文件名改成`{用户名}.html`，并在后续填写步骤1的用户名时填写该名称。

   - 保存的`.html`文件默认名可能为`view-source_https___maimaidx-eng.com_maimai-mobile_home_ratingTargetMusic_.html`。程序会优先寻找与您配置中用户名相同的`.html`文件，再尝试寻找这个名称的文件，最后则尝试读取第一个`.html`文件。

   - 您也可以跳过第2步，直接按照第3步的操作保存一个`.html`文件，这种情况下的`.html`文件也可以使用。不过，浏览器可能保存了一些其他文件（如图片等），您可以放心的删除这些文件。

4. 将刚刚保存的`.html`文件移动至软件根目录下（如果您正确放置文件，它应该与`start.bat`、`st_app.py`等文件处于同一文件夹内）。

5. 根据[使用说明](../README.md/#使用说明)的步骤继续使用。不同的是，在获取B50成绩时，请选择`从本地HTML读取B50（国际服）`。

## 插件特性

- 尽可能保留原仓库的.py文件，避免分支更新产生冲突

- （目前）使用保存的Rating对象乐曲网页作为B50信息的读取源，替代国服使用的水鱼查分器获取B50.

- 支持DX.NET国际服的网页信息解析。理论上支持日服，但是开发者没有日服账号无法测试或开发页面适配。

## 开发状态与计划

- [x] 支持获取更多非国服乐曲的ID和定数；

- [ ] 支持更灵活的上传HTML数据；

- [ ] 为本插件录制一个简单的介绍视频；

- [ ] 改变成绩的获取来源，以获取DX score、FC等级、FS等级；

- [ ] 歌曲列表文件的自动更新同步。

## 常见问题

- 报错`Error: No HTML file found in the root folder.`

请检查是否正确保存了您的HTML数据，是否正确的放置在软件根目录。

- 报错`Error: B35(B15) not found. 请检查HTML文件是否正确保存！`

请检查保存的网页是否是DX Rating对象乐曲界面。在乐曲加载时保存也可能导致这个问题。
（!）如果您是日服玩家，这可能是DX.NET语言不适配导致的。请进群联系开发者完成日服补丁。

- 下载视频后许多谱面都指向同一个`None-3-DX.mp4`（或相似的以None开头的名称）

这是一个截止`v0.3.3`版本的常见问题，原因是太新的曲目并没有一个内部id，请更新到更新版本。
如无法解决，请联系开发者获取更多信息。

- 显示`已找到谱面视频的缓存`，但是不是正确的谱面

如果显示的缓存视频名称结构为`-XX-Y-DX.mp4`，例如`-39-3-DX.mp4`，说明这是上一次下载视频时有缺少内部id的曲目并留下了缓存视频。
您可以删除对应文件或修改其名称，然后尝试重新下载。

## 引用

[maimaiDX-songs](https://github.com/Becods/maimaiDX-songs) 更新更热的歌曲数据库